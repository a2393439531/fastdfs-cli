webpackJsonp([0],{PVmc:function(e,t){},lO7g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),l=a.n(i),s=a("exGp"),n=a.n(s),r=a("8Pq/"),o={name:"Home",data:function(){return{activeIndex:2,tableData:[],dialogVisible:!1,fileUrl:"",title:"",imagesVisible:!1,videoVisible:!1,total:0,tablePage:{pageCurrent:1,pageSize:[30]},imageClass:["bmp","jpg","png","tif","gif","pcx","tga","exif","fpx","svg","psd","cdr","pcd","dxf","ufo","eps","ai","raw","WMF","webp"],videoClass:["mp4","avi","asf","webm","ogg"]}},mounted:function(){this.findByPage()},methods:{tableRowClassName:function(e){var t=e.row;e.rowIndex;return this.imageClass.indexOf(t.suffix)>=0?"image-row":this.videoClass.indexOf(t.suffix)>=0?"video-row":"file-row"},handleCurrentChange:function(e){this.tablePage.pageCurrent=e,this.findByPage()},closeDialog:function(){this.dialogVisible=!1},deletedClick:function(e){var t=this;return n()(l.a.mark(function a(){var i,s,n,o;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i="/api/deleted/v1",(s={}).fileId=e.fileId,a.next=5,r.a.post(i,s);case 5:n=a.sent,(o=n.data).success?t.$message({message:o.message,type:"success"}):t.$message({message:o.message,type:"error"}),t.findByPage();case 9:case"end":return a.stop()}},a,t)}))()},handleClick:function(e){if(this.fileUrl="/api/download/v1?fileId="+e.fileId,this.imageClass.indexOf(e.suffix)>=0)this.imagesVisible=!0,this.videoVisible=!1;else{if(!(this.videoClass.indexOf(e.suffix)>=0))return void window.open(this.fileUrl);this.videoVisible=!0,this.imagesVisible=!1}this.title=e.filename,this.dialogVisible=!0},findByPage:function(){var e=this;return n()(l.a.mark(function t(){var a,i,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="/file/find/page?page="+e.tablePage.pageCurrent+"&size="+e.tablePage.pageSize,t.next=3,r.a.get(a);case 3:i=t.sent,s=i.data,e.tableData=s.content,e.total=s.totalElements;case 7:case"end":return t.stop()}},t,e)}))()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[a("router-link",{attrs:{to:"/",tag:"div"}},[e._v("登陆页")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("router-link",{attrs:{to:"/home",tag:"div"}},[e._v("首页")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"3",disabled:""}},[e._v("统计")]),e._v(" "),a("el-menu-item",{attrs:{index:"4",disabled:""}},[e._v("日志分析")]),e._v(" "),a("el-menu-item",{attrs:{index:"5",disabled:""}},[e._v("用户管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"6",disabled:""}},[e._v("系统信息")])],1),e._v(" "),a("div",{staticClass:"line"}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"fileName",label:"文件名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileSize",label:"文件大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n          "+e._s(Math.round(t.row.fileSize/1024).toFixed(2))+" KB\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"visitsCount",label:"访问次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"suffix",label:"文件后缀"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fileId",label:"FileId",width:"500"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deletedClick(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("span",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.tablePage.pageCurrent,"page-sizes":e.tablePage.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("br"),e._v(" "),a("span",{staticStyle:{"text-align":"center"}},[a("router-link",{attrs:{to:"/",tag:"div"}},[a("el-link",{attrs:{type:"primary"}},[e._v("返回登陆页")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"图片查看",visible:e.dialogVisible,"before-close":e.closeDialog}},[a("span",[a("div",{staticClass:"images"},[e.imagesVisible?a("img",{staticStyle:{width:"100%"},attrs:{height:"600",src:e.fileUrl,alt:e.title}}):e._e(),e._v(" "),e.videoVisible?a("video",{staticStyle:{width:"99.99%"},attrs:{height:"600",src:e.fileUrl,autoplay:"autoplay",controls:"controls"}}):e._e()])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog()}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(o,d,!1,function(e){a("PVmc")},null,null);t.default=c.exports}});
//# sourceMappingURL=0.c006f94c98c84ac5751a.js.map